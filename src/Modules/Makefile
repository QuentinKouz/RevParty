CC = gcc
CFLAGS = -w -std=c99 -pedantic -Wall

UTILS_SD_SOURCES = utils_sd.c
LISTE_SOURCES = element_liste.c liste.c
UNINOMINALES_SOURCES = uninominales.c
CONDORCET_MINIMAX_SOURCES = condorcet_minimax.c
CONDORCET_PAIRES_SOURCES = condorcet_paires.c
CONDORCET_SCHULZE_SOURCES = condorcet_schulze.c
JUGEMENT_MAJ_SOURCES = jugement_majoritaire.c
LECTURE_CSV_SOURCES = lecture_csv.c
MAIN_SOURCES = main.c
VERIFY_MY_VOTE_SOURCES = verify_my_vote.c

COMMON_SOURCES = $(UTILS_SD_SOURCES) $(LISTE_SOURCES) $(UNINOMINALES_SOURCES) $(CONDORCET_MINIMAX_SOURCES) $(CONDORCET_PAIRES_SOURCES) $(CONDORCET_SCHULZE_SOURCES) $(JUGEMENT_MAJ_SOURCES) $(LECTURE_CSV_SOURCES)

COMMON_OBJECTS = $(COMMON_SOURCES:.c=.o)
MAIN_OBJECTS = $(MAIN_SOURCES:.c=.o)
VERIFY_MY_VOTE_OBJECTS = $(VERIFY_MY_VOTE_SOURCES:.c=.o)

.PHONY: all clean

all: main

main: $(COMMON_OBJECTS) $(MAIN_OBJECTS)
	$(CC) $(COMMON_OBJECTS) $(MAIN_OBJECTS) -o $@

verify_my_vote: $(COMMON_OBJECTS) $(VERIFY_MY_VOTE_OBJECTS)
	$(CC) $(COMMON_OBJECTS) $(VERIFY_MY_VOTE_OBJECTS) -o $@

%.o: %.c
	$(CC) $(CFLAGS) -c $< -o $@

clean:
	rm -f main verify_my_vote $(COMMON_OBJECTS) $(MAIN_OBJECTS) $(VERIFY_MY_VOTE_OBJECTS)
